{% extends "base.html" %}
{% import "_macros.html" as macros %}
{% block page_content %}

    {% for post in posts %}
        <div class="weui-form-preview preview_card">
            <div class="card_body">
                <a href="{{ url_for('posts.post_detail', post_id=post.post_id) }}"><h3 class="post_title">{{ post.title }}</h3></a>
                <div class="post_data"><span>{{ post.author.name }}</span><span class="float_right">{{ moment(post.timestamp).fromNow() }}</span></div>
                <div class="post_content">
                    {{ post.body_html|truncate(180, True)|prettify|safe}}
                </div>
            </div>
        </div>
    {% endfor %}
    {% if pagination.pages > 1 %}
        <div class="pagination_div">
            {{ macros.pagination_widget(pagination, 'main.index') }}
        </div>
    {% endif %}

{% endblock %}